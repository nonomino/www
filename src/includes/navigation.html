<!-- _includes/navbar.html -->
<header class="navbar" id="navbar">
	<div class="navbar-container">
		<!-- Main navbar row with background -->
		<div class="navbar-row">
			<!-- Brand with current page indicator -->
			<div class="navbar-brand-container">
				<a href="{{ '/' | relative_url }}" class="navbar-brand">
					{{ site.title | default: "nonomino" }}
				</a>
				<div class="current-page" id="currentPage">
					<!-- Will be populated by JavaScript -->
				</div>
			</div>

			<!-- Controls -->
			<div class="navbar-controls">
				<!-- Search -->
				<div class="search-modal-bg" id="searchModalBg"></div>
				<div class="search-input-modal" id="searchInputModal">
					<button class="search-close" id="searchClose">Ã—</button>
					<input type="text" placeholder="Search..." id="searchField" autocomplete="off">
					<div class="search-modal-results" id="searchResults"></div>
				</div>

				<!-- In navbar controls, only keep the trigger: -->
				<div class="search-container" style="position: relative;">
					<button class="nav-button" id="searchToggle">
						<svg viewBox="0 0 24 24">
							<circle cx="11" cy="11" r="8"></circle>
							<path d="m21 21-4.35-4.35"></path>
						</svg>
					</button>
				</div>


				<!-- Theme Toggle -->
				<button class="nav-button" id="theme-toggle" data-baseurl="{{ site.baseurl }}">
					<svg id="theme-icon" viewBox="0 0 24 24">
						<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
					</svg>
				</button>

				<!-- Mobile Menu -->
				<nav class="mobile-nav-container" style="position: relative;">
					<button class="nav-button burger-menu" id="mobileMenuToggle">
						<svg viewBox="0 0 24 24">
							<line x1="3" y1="6" x2="21" y2="6"></line>
							<line x1="3" y1="12" x2="21" y2="12"></line>
							<line x1="3" y1="18" x2="21" y2="18"></line>
						</svg>
					</button>
					<div class="mobile-dropdown" id="mobileDropdown">
						<ul class="mobile-nav">
							{% if site.data.navigation %}
							{% for link in site.data.navigation %}
							{% if link.url contains '://' %}
							{% assign url = link.url %}
							{% else %}
							{% assign url = link.url | relative_url %}
							{% endif %}
							<li class="nav-item">
								<a href="{{ url }}" class="nav-link">{{ link.title }}</a>
							</li>
							{% endfor %}
							{% endif %}
						</ul>
					</div>
				</nav>
			</div>
		</div>

		<!-- Desktop Navigation -->
		<nav class="desktop-nav">
			<ul class="nav-links">
				{% if site.data.navigation %}
				{% for link in site.data.navigation %}
				{% if link.url contains '://' %}
				{% assign url = link.url %}
				{% else %}
				{% assign url = link.url | relative_url %}
				{% endif %}
				<li>
					<a href="{{ url }}" class="nav-link">{{ link.title }}</a>
				</li>
				{% endfor %}
				{% endif %}
			</ul>
		</nav>
	</div>
</header>